<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mandelbrot Explorer</title>
<style>
  body {
    background: #111;
    color: white;
    font-family: sans-serif;
    text-align: center;
    margin: 0;
  }
  canvas {
    display: block;
    margin: auto;
    background: black;
  }
</style>
</head>
<body>

<h1>Mandelbrot Explorer</h1>
<canvas id="mandelbrot"></canvas>

<script>
// Color palettes with integer RGB values
const colorPalettes = {
  magma: (t) => {
    const r = Math.round(Math.min(255, 250 + Math.sin(t * 10) * 5));
    const g = Math.round(Math.min(255, 100 + Math.sin(t * 15) * 30));
    const b = Math.round(Math.min(255, 120 + Math.sin(t * 20) * 40));
    return `rgb(${r},${g},${b})`;
  },
  plasma: (t) => {
    const r = Math.round(255 * Math.abs(Math.sin(t * Math.PI)));
    const g = Math.round(255 * Math.abs(Math.sin(t * Math.PI + 2)));
    const b = Math.round(255 * Math.abs(Math.sin(t * Math.PI + 4)));
    return `rgb(${r},${g},${b})`;
  },
  inferno: (t) => {
    const r = Math.round(255 * t);
    const g = Math.round(255 * t * t);
    const b = Math.round(255 * t * t * t);
    return `rgb(${r},${g},${b})`;
  },
  viridis: (t) => {
    const r = Math.round(255 * t);
    const g = Math.round(255 * (1 - t));
    const b = Math.round(255 * Math.sqrt(t));
    return `rgb(${r},${g},${b})`;
  },
  rainbow: (t) => {
    const r = Math.round(127 * Math.sin(t * 6.28) + 128);
    const g = Math.round(127 * Math.sin(t * 6.28 + 2) + 128);
    const b = Math.round(127 * Math.sin(t * 6.28 + 4) + 128);
    return `rgb(${r},${g},${b})`;
  },
  electric: (t) => {
    const r = Math.floor(Math.abs(Math.sin(t * 0.05)) * 255);
    const g = Math.floor(Math.abs(Math.sin(t * 0.05 + Math.PI / 3)) * 255);
    const b = Math.floor(Math.abs(Math.sin(t * 0.05 + (2 * Math.PI) / 3)) * 255);
    return `rgb(${r},${g},${b})`;
  }
};

const canvas = document.getElementById('mandelbrot');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let paletteName = 'electric'; // Change palette here
const maxIter = 500;
const zoom = 200;
const panX = 2;
const panY = 1.5;

function drawMandelbrot() {
  const img = ctx.createImageData(canvas.width, canvas.height);
  const data = img.data;
  const getColor = colorPalettes[paletteName];

  for (let px = 0; px < canvas.width; px++) {
    for (let py = 0; py < canvas.height; py++) {
      let x0 = (px - canvas.width / 2) / zoom - (panX - 2);
      let y0 = (py - canvas.height / 2) / zoom - (panY - 1.5);
      let x = 0, y = 0, iteration = 0;

      while (x * x + y * y <= 4 && iteration < maxIter) {
        let xTemp = x * x - y * y + x0;
        y = 2 * x * y + y0;
        x = xTemp;
        iteration++;
      }

      const t = iteration / maxIter;
      const color = getColor(t);
      const match = color.match(/rgb\((\d+),(\d+),(\d+)\)/);

      const idx = 4 * (py * canvas.width + px);
      if (match) {
        data[idx] = parseInt(match[1], 10);
        data[idx + 1] = parseInt(match[2], 10);
        data[idx + 2] = parseInt(match[3], 10);
        data[idx + 3] = 255;
      }
    }
  }
  ctx.putImageData(img, 0, 0);
}

drawMandelbrot();
</script>
</body>
</html>
