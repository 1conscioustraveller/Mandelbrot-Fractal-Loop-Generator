<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Animated Counterclockwise Spiral</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; margin: auto; background: black; }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

ctx.translate(canvas.width / 2, canvas.height / 2);
ctx.lineWidth = 2;
ctx.lineCap = "round";

let h = 0; // hue
let i = 0, j = 0; // loop indices
let step = 0;     // animation step
let arcs = [];

// Build a list of drawing instructions (like turtle's loop order)
function buildArcs() {
    for (let iLoop = 0; iLoop < 16; iLoop++) {
        for (let jLoop = 0; jLoop < 18; jLoop++) {
            arcs.push({
                radius: 150 - jLoop * 6,
                hue: h,
                rotateBefore: 90,
            });
            h += 0.005;

            arcs.push({
                radius: 150 - jLoop * 6,
                hue: h,
                rotateBefore: -90,
            });
            h += 0.005;

            arcs.push({
                radius: 150 - jLoop * 6,
                hue: h,
                rotateBefore: 180,
            });
            h += 0.005;
        }
        arcs.push({
            radius: 40,
            extentDeg: 24,
            hue: h,
            rotateBefore: 0,
        });
        h += 0.005;
    }
}
buildArcs();

// Animation state
let currentRotation = 0;
function animate() {
    if (step < arcs.length) {
        let arcData = arcs[step];
        ctx.save();
        ctx.rotate(currentRotation * Math.PI / 180);

        ctx.strokeStyle = `hsl(${arcData.hue * 360}, 100%, 50%)`;
        ctx.beginPath();

        let extent = arcData.extentDeg ? arcData.extentDeg : 90;
        ctx.arc(0, 0, arcData.radius, 0, extent * Math.PI / 180, true); // CCW
        ctx.stroke();

        ctx.restore();

        currentRotation += arcData.rotateBefore || 0;
        step++;
    }

    requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
